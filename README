sfMooToolsFormExtraPlugin
=========================

@author:    Jo Carter (<jocarter@holler.co.uk>)

@version:   1.0


Introduction
------------

This plugin contains several widgets (and a validator) for use with the [MooTools](http://mootools.net/) javascript framework.

Be sure to ./symfony plugin:publish-assets after installation to ensure all the JavaScript and Stylesheet files are in place


Credits:
--------

* [MooEditable](http://mootools.net/forge/p/mooeditable) - Lim Chee Aun, Radovan Lozej, Ryan Mitchell, Olivier Refalo and T.J. Leahy

NOTE: MooEditable.CleanPaste JS has been altered from version provided with MooEditable to fix bugs with Safari

* [Datepicker](http://mootools.net/forge/p/mootools_datepicker) - Arian Stolwijk

NOTE: Default Datepicker 'datepicker_dashboard' theme has been altered from the orginal to be lighter


Javascript Pre-requisites
-------------------------

 * MooTools Core 1.3+
 * Custom version of MooTools.More on a project level
   * Datepicker requires MooTools.More:
     * More/Date 
     * More/Date.Extras 
     * More/Locale 
     * More/Locale.en-GB.Date
   * MooEditable requires MooTools.More:
     * More/Class.Refactor 
     * More/Locale 
     * More/Locale.en-GB.Date


Enhanced String Validator
-------------------------
  
 * Adds %current_length% to the options for the validator messages
 * Strips HTML tags before calculating length, but returns the string with HTML
 * Can be used in conjunction with other validators

### Example usage: ###

  Default implementation:
    
      $this->validatorSchema['text'] = new sfEnhancedValidatorString(array('max_length'=>200), 
                                                                     array('max_length'=>'Content is too long (%current_length% characters), please limit to %max_length% characters'));

MooEditable Textarea
--------------------

All configuration options:

 * config: Additional MooEditable configuration
 * width: The width of the editable area
 * height: The height of the editable area
 * extratoolbar: Any additional toolbar options - include | to separate

Default configuration (controlled in plugins/sfMooToolsFormExtraPlugin/config/app.yml):

 * Controls all default configuration options
 * Controls base CSS for the editable area
 * Controls whether CleanPaste included (by default)
 * Controls base toolbar options, and allows extra CSS and JS to be added if the default toolbar for all widgets is changed


### Example usage: ###

![mooeditable.png](http://svn.symfony-project.com/plugins/sfMooToolsFormExtraPlugin/trunk/docs/images/mooeditable.png)

  Default implementation:
    
      $this->widgetSchema['text'] = new sfWidgetFormTextareaMooEditable();


Datepicker - input box with calendar control on input click
-----------------------------------------------------------

Default configuration (controlled in plugins/sfMooToolsFormExtraPlugin/config/app.yml):

 * Controls locale (defaults to en-GB), and location of locale files - must include all locales if local files
 * Controls the theme and location of the theme CSS files and images

Widget configuration options:

 * locale: if this is changed from the default, will require additional JS locale files
 * with_time: include time in the date picker (date format defaults to Y-m-d H:i instead of Y-m-d to validate with sfValidatorDate)
 * year_picker: defaults to true, click on the month name twice to select year - if date range restricted within one year then set to 'false'
 * min_date: default is none, set to restrict date range (format: see above)
 * max_date: default is none, set to restrict date range (format: see above)


### Example usage: ###

![datepicker_input.png](http://svn.symfony-project.com/plugins/sfMooToolsFormExtraPlugin/trunk/docs/images/datepicker_input.png)

  Just date:
    
      $this->widgetSchema['date'] = new sfWidgetFormInputDateTimeMooPicker();
    
  Date with min and max:
    
      $minDate = '2006-01-01';
      $maxDate = (date('Y') + 1) . '-12-31';
      $this->widgetSchema['date'] = new sfWidgetFormInputDateTimeMooPicker(array('min_date'=>$minDate, 'max_date'=>$maxDate));
      
  With time:

      $this->widgetSchema['date'] = new sfWidgetFormInputDateTimeMooPicker(array('with_time'=>'true'));

  
Datepicker - dropdowns with calendar control on image click
-----------------------------------------------------------

Default configuration (controlled in plugins/sfMooToolsFormExtraPlugin/config/app.yml):

 * Controls locale (defaults to en-GB), and location of locale files - must include all locales if moved
 * Controls the theme and location of the theme CSS files and images

Widget configuration options:

(date):

 * locale: if this is changed from the default, will require additional JS locale files
 * year_picker: defaults to true, click on the month name twice to select year - if date range restricted within one year then set to 'false'
 * min_date: default is none, set to restrict date range (format: Y-m-d)
 * max_date: default is none, set to restrict date range (format: Y-m-d)
 * date_widget: The date widget to render with the calendar

(datetime):

 * locale: if this is changed from the default, will require additional JS locale files
 * year_picker: defaults to true, click on the month name twice to select year - if date range restricted within one year then set to 'false'
 * min_date: default is none, set to restrict date range (format: Y-m-d)
 * max_date: default is none, set to restrict date range (format: Y-m-d)
 * date_time_widget: The datetime widget to render with the calendar
    
    
### Example usage: ###

![datepicker_date.png](http://svn.symfony-project.com/plugins/sfMooToolsFormExtraPlugin/trunk/docs/images/datepicker_date.png)

  Just date:
  
      $this->widgetSchema['date'] = new sfWidgetFormDateMooPicker();
      
  Date with min and max and customised date widget:

      $years = range(2006, (date('Y') + 1));
      $minDate = '2006-01-01';
      $maxDate = (date('Y') + 1) . '-12-31';
      $this->widgetSchema['date'] = new sfWidgetFormDateMooPicker(array('min_date'=>$minDate, 'max_date'=>$maxDate, 
                                                                        'date_widget'=>new sfWidgetFormDate(array('years'=>array_combine($years, $years), 
                                                                                                                  'format'=>'%day% %month% %year%'))));
      
  With time:
  
      $this->widgetSchema['date'] = new sfWidgetFormDateTimeMooPicker();
    
![datepicker_datetime.png](http://svn.symfony-project.com/plugins/sfMooToolsFormExtraPlugin/trunk/docs/images/datepicker_datetime.png)
    
  Customised datetime widget:
  
      $years = range(2006, (date('Y') + 1));
      $minDate = '2006-01-01';
      $maxDate = (date('Y') + 1) . '-12-31';
      $this->widgetSchema['date'] = new sfWidgetFormDateTimeMooPicker(array('min_date'=>$minDate, 'max_date'=>$maxDate, 
                                                                            'date_time_widget'=>new sfWidgetFormDateTime(array('date' => array('years'=>array_combine($years, $years), 
                                                                                                                                               'format'=>'%day% %month% %year%'),
                                                                                                                               'time'=> array('format'=>'%hour% %minute%')))));
